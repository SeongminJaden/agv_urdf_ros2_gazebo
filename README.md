# agv_urdf_ros2_gazebo
agv_urdf_ros2_gazebo </br>
![{AA1A592F-71D5-411E-9E0C-E36CB05545FF}](https://github.com/user-attachments/assets/fc7b8c57-7e9c-4c68-b1a6-3aae9ecd1b15) </br>
600*600*600 í¼í™í„° ê·œê²©ì˜ Dual motor AGVì…ë‹ˆë‹¤.</br>
ros2 ê¸°ë°˜ì˜ SLAM->Navigationì„ ëª©ì ìœ¼ë¡œ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤.</br>

|ë¶€í’ˆëª…|ì¹´í…Œê³ ë¦¬|ì œì¡°ì‚¬|ìˆ˜ëŸ‰|ë‹¨ê°€|ê³„|ë¹„ê³ |
|---|---|---|---|---|---|---|
|A2M4-R|ë¼ì´ë‹¤ ì„¼ì„œ|SLAMTEC|1|573,410|573,410|Range : 0.2m~16m|
|MDR200|ë“œë¼ì´ë¹™ ìœ ë‹›|ì— ë””ë¡œë´‡|2|409,000|818,000|0.8m/s(2.9km/h),ê°ì†ë¹„ 1/30|
|MD400T|ëª¨í„° ë“œë¼ì´ë²„|ì— ë””ë¡œë´‡|1|374,000|374,000|RS485 ROS Package|
|CVCOM370|ë°°í„°ë¦¬|íƒ€ë³´ìŠ¤|1|1,039,500|1,039,500|LGì—ë„ˆì§€ì†”ë£¨ì…˜ 21700 ì…€|
|TC-700W|ì¶©ì „ê¸°|íƒ€ë³´ìŠ¤|1|568,700|568,700|RS232|ë°°í„°ë¦¬ ìƒíƒœ|ëª¨ë‹ˆí„°ë§ ëª¨ë“ˆ í¬í•¨|
|MW-AHRS X1|IMU|ì—”í‹°ë ‰ìŠ¤|1|154,000|154,000|
|ë¼ì¦ˆë² ë¦¬íŒŒì´ 5|ì œì–´PC|ë¼ì¦ˆë² ë¦¬íŒŒì´|1|117,700|117,700|êµ¬ë§¤ì²˜ - ì—˜ë ˆíŒŒì¸ |
|Arducam 1080P|RGB Cam|Arducam|4|71,500|286,000|ë³´ìœ ì¬ê³  í™•ì¸|
|TFmini Plus LiDAR|ì´ˆìŒíŒŒ ì„¼ì„œ|Benewake|4|65,890|263,560|
|USB to UART RS485|TTL to usbì»¨ë²„í„°|ë””ì›°ì „ì|4|19,448|77,792|
|USB to RS232|TTL to usbì»¨ë²„í„°|ì— ë””ë¡œë´‡|1|39,600 39,600|
|PDIST30|ì „ì›ë¶„ë°°ë³´ë“œ|ì— ë””ë¡œë´‡|1|110,000 110,000|
|PDIST80|ì „ì›ë¶„ë°°ë³´ë“œ|ì— ë””ë¡œë´‡|1|120,000 120,000|
|STS040-C51-3-M|3ë‹¨ ê²½ê´‘ë“±|ë‚˜ë¹„ì— ì•Œì˜¤|1|42,990|42,990|
|ìºìŠ¤í„° íœ |ë³´ì¡°ë°”í€´|í•œêµ­ ë¯¸ìŠ¤ë¯¸|2|6,223|12,446|
|2040 Profile|ì•Œë£¨ë¯¸ëŠ„|í”„ë¡œíŒŒì¼|ë‚˜ë¹„ì— ì•Œì˜¤|10|8,390|83,900|ìˆ˜ëŸ‰ : 1000më‹¹ 1|
|AI5052|ì•Œë£¨ë¯¸ëŠ„ í•˜ìš°ì§•|ë‚˜ë¹„ì— ì•Œì˜¤|1|95,000|95,000|ìˆ˜ëŸ‰ - 1000m^2ë‹¹ 1, AI6061ê°€ê³µ ë³€ë™ ê°€ëŠ¥ì„± ìˆìŒ, 6061ê°€ê³µì‹œ 95000ì›|
|í•˜ìš°ì§•|ê°€ê³µ í•˜ìš°ì§• ê°€ê³µ|na|1|200000|200,000|3ì¶• CNCê°€ê³µ - ì§„ì„±ì •ë°€(ê²¬ì  ì§„í–‰ í›„ ìµœì¢… ê°€ê²© ì¬ì‚°ì • í•„ìš”, ìì¬ ìˆ˜ê¸‰ ê¸°í•œ, ì‘ì—…ì¼ì— ë”°ë¦„)|
|ì „ì› ë°•ìŠ¤|EMGë‹¨ì í•¨|na|1|300000|300,000|í“¨ì¦ˆë°•ìŠ¤, ì „ì› ë‹¨ì í•¨ ê°€ê³µ - ë¶€ì›ì´ì—”ì§€ 5,276,598|

ë ˆí¼ëŸ°ìŠ¤ ìë£Œ
![{B8BFACE7-F32D-45C8-9FA4-BF13873BBD31}](https://github.com/user-attachments/assets/82486ed2-fd0c-4855-8943-aa5956034473)
![{EEFD2A51-E3ED-48DD-8D49-9442F04C0AE6}](https://github.com/user-attachments/assets/c3a2432f-02d7-4523-84d5-769a137d98dc)

ì‹¤ë¬¼ì‚¬ì§„
![20241001_173311](https://github.com/user-attachments/assets/860215a6-6ba1-419f-b251-d87046763f55)
![20241016_160816](https://github.com/user-attachments/assets/53b8bcc5-1134-4890-8d56-283753a60c32)
![20241007_073647](https://github.com/user-attachments/assets/900edc4f-fe10-46d9-9853-cd276df5fe2c)
![20241007_050917](https://github.com/user-attachments/assets/b31b3b19-8d60-4ca6-8579-9f3347b03c4a)

github
[amr bringup launch package](https://github.com/SeongminJaden/ros2_amr)

# ROS2 Humble - TurtleBot3 SLAM ë° Navigation ì„¤ì •

ì´ ë¬¸ì„œëŠ” ROS2 Humbleì—ì„œ TurtleBot3ì˜ SLAM (Simultaneous Localization and Mapping) ë° Navigationì„ ì„¤ì •í•˜ê³  ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## 1. ê°œìš”

TurtleBot3ëŠ” ROS2 í™˜ê²½ì—ì„œ ë¡œë´‡ì˜ SLAM ë° Navigationì„ ì§€ì›í•˜ëŠ” ì¸ê¸° ìˆëŠ” í”Œë«í¼ì…ë‹ˆë‹¤. ì´ ë¬¸ì„œëŠ” TurtleBot3ì—ì„œ SLAMê³¼ Navigation ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ê³  ì´ë¥¼ í™œìš©í•˜ëŠ” ë° í•„ìš”í•œ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### 1.1 SLAM (Simultaneous Localization and Mapping)
SLAMì€ ë¡œë´‡ì´ ìì‹ ì˜ ìœ„ì¹˜ë¥¼ ì¶”ì •í•˜ë©´ì„œ ë™ì‹œì— í™˜ê²½ì˜ ë§µì„ ìƒì„±í•˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤. TurtleBot3ì—ì„œëŠ” ë‹¤ì–‘í•œ SLAM ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 1.2 Navigation
Navigationì€ ë¡œë´‡ì´ ì£¼ì–´ì§„ í™˜ê²½ì—ì„œ ëª©í‘œ ì§€ì ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì´ë™í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œëŠ” ë¡œë´‡ì˜ ìœ„ì¹˜ ì¶”ì •, ì¥ì• ë¬¼ íšŒí”¼ ë° ê²½ë¡œ ê³„íšì„ í¬í•¨í•©ë‹ˆë‹¤.

---

## 2. TurtleBot3 ì„¤ì¹˜ ë° í™˜ê²½ ì„¤ì •

### 2.1 ROS2 Humble ì„¤ì¹˜

1. **ROS2 Humble**ì„ ì„¤ì¹˜í•˜ë ¤ë©´ [ROS2 ê³µì‹ ì„¤ì¹˜ ë¬¸ì„œ](https://docs.ros.org/en/humble/Installation.html)ë¥¼ ì°¸ì¡°í•˜ì‹­ì‹œì˜¤.
   
2. ROS2 Humbleì„ ì„¤ì¹˜í•œ í›„, TurtleBot3 íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤:

```bash
sudo apt update
sudo apt install ros-humble-turtlebot3 ros-humble-turtlebot3-msgs
```
### 2.2 TurtleBot3 ëª¨ë¸ ì„¤ì •
TurtleBot3 ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ ì•„ë˜ì˜ ëª…ë ¹ì„ í†µí•´ í™˜ê²½ ë³€ìˆ˜ì— ëª¨ë¸ì„ ì„¤ì •í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë‹¤ì–‘í•œ TurtleBot3 ëª¨ë¸(ë²„ê±°, ì™€í”Œ ë“±)ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
export TURTLEBOT3_MODEL=burger  # burger, waffle, waffle_pi ì¤‘ ì„ íƒ
```
## 3. SLAM ì‚¬ìš©í•˜ê¸°
### 3.1 SLAM ì„¤ì •
TurtleBot3ëŠ” Cartograperë¥¼ ì‚¬ìš©í•˜ì—¬ SLAMì„ ì„¤ì •í•©ë‹ˆë‹¤. ì•„ë˜ ëª…ë ¹ì„ í†µí•´ SLAMì„ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

SLAM ì‹¤í–‰:

```bash
ros2 launch turtlebot3_cartographer cartographer.launch.py use_sim_time:=True
```
ì´ ëª…ë ¹ì€ TurtleBot3ì˜ SLAM ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ê³ , Cartograperë¥¼ ì‚¬ìš©í•˜ì—¬ ë§µì„ ìƒì„±í•©ë‹ˆë‹¤. ë¡œë´‡ì„ ì›€ì§ì´ë©´ì„œ ì£¼ë³€ í™˜ê²½ì˜ ë§µì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 3.2 SLAM ê´€ë ¨ í† í”½
SLAMì„ ì‚¬ìš©í•  ë•Œ ìƒì„±ë˜ëŠ” ì£¼ìš” í† í”½ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
```
/Cartograper/trajectory: SLAM íŠ¸ë˜ì í† ë¦¬ ì •ë³´
/map: ìƒì„±ëœ ë§µ ë°ì´í„°
/scan: LiDAR ì„¼ì„œë¡œë¶€í„°ì˜ ê±°ë¦¬ ì¸¡ì • ë°ì´í„°
/tf: ë¡œë´‡ì˜ ìœ„ì¹˜ ë° ë°©í–¥ì„ ë‚˜íƒ€ë‚´ëŠ” ë³€í™˜ ì •ë³´
```
### 3.3 SLAM ê´€ë ¨ ë©”ì‹œì§€ íƒ€ì…
SLAMì— ê´€ë ¨ëœ ì£¼ìš” ë©”ì‹œì§€ íƒ€ì…ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
```
sensor_msgs/LaserScan: LiDAR ì„¼ì„œ ë°ì´í„°ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë©”ì‹œì§€ íƒ€ì…ìœ¼ë¡œ, /scan í† í”½ì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.
nav_msgs/OccupancyGrid: ìƒì„±ëœ ë§µ ë°ì´í„°ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë©”ì‹œì§€ íƒ€ì…ìœ¼ë¡œ, /map í† í”½ì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.
geometry_msgs/Pose: ë¡œë´‡ì˜ ìœ„ì¹˜ì™€ ë°©í–¥ì„ ë‚˜íƒ€ë‚´ëŠ” ë©”ì‹œì§€ íƒ€ì…ìœ¼ë¡œ, /tf ë° /slam_toolbox/trajectoryì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.
```
## 4. Navigation ì‚¬ìš©í•˜ê¸°
### 4.1 Navigation ì„¤ì •
TurtleBot3ì˜ Navigationì„ ì„¤ì •í•˜ë ¤ë©´ nav2_bringup íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì•„ë˜ ëª…ë ¹ì„ í†µí•´ Navigationì„ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Navigation ì‹¤í–‰:

```
ros2 launch turtlebot3_navigation2 navigation_launch.py
```
ì´ ëª…ë ¹ì€ Navigationì„ í™œì„±í™”í•˜ê³  ë¡œë´‡ì´ ë§µì—ì„œ ì§€ì •ëœ ëª©í‘œ ìœ„ì¹˜ë¡œ ì´ë™í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

### 4.2 Navigation ê´€ë ¨ í† í”½
Navigationì„ ì‚¬ìš©í•  ë•Œ ìƒì„±ë˜ëŠ” ì£¼ìš” í† í”½ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
```
/move_base_simple/goal: ëª©í‘œ ì§€ì ì„ ì§€ì •í•˜ëŠ” í† í”½
/cmd_vel: ë¡œë´‡ì˜ ì†ë„ ëª…ë ¹ì„ ë³´ë‚´ëŠ” í† í”½
/odom: ë¡œë´‡ì˜ ì˜¤ë„ë©”íŠ¸ë¦¬ ì •ë³´
/tf: ë¡œë´‡ì˜ ìœ„ì¹˜ì™€ ë°©í–¥ì„ ë‚˜íƒ€ë‚´ëŠ” ë³€í™˜ ì •ë³´
/costmap: ì¥ì• ë¬¼ ë§µì„ ë‚˜íƒ€ë‚´ëŠ” í† í”½
```
### 4.3 Navigation ê´€ë ¨ ë©”ì‹œì§€ íƒ€ì…
Navigationì— ê´€ë ¨ëœ ì£¼ìš” ë©”ì‹œì§€ íƒ€ì…ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
```
geometry_msgs/PoseStamped: ëª©í‘œ ì§€ì ì˜ ìœ„ì¹˜ì™€ ë°©í–¥ì„ ì§€ì •í•˜ëŠ” ë©”ì‹œì§€ íƒ€ì…ìœ¼ë¡œ, /move_base_simple/goalì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.
geometry_msgs/Twist: ë¡œë´‡ì˜ ì„ í˜• ì†ë„ì™€ ê°ì†ë„ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë©”ì‹œì§€ íƒ€ì…ìœ¼ë¡œ, /cmd_velì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.
nav_msgs/Odometry: ë¡œë´‡ì˜ ìœ„ì¹˜ì™€ ì†ë„ ì •ë³´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë©”ì‹œì§€ íƒ€ì…ìœ¼ë¡œ, /odomì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.
nav_msgs/OccupancyGrid: ì¥ì• ë¬¼ ë§µ ì •ë³´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë©”ì‹œì§€ íƒ€ì…ìœ¼ë¡œ, /costmapì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.
```
## 5. ì‹¤ì‹œê°„ ì§€ë„ ì—…ë°ì´íŠ¸ ë° ì¥ì• ë¬¼ íšŒí”¼
### 5.1 ì§€ë„ ì—…ë°ì´íŠ¸
SLAMì„ ì‚¬ìš©í•˜ì—¬ ì‹¤ì‹œê°„ìœ¼ë¡œ ì§€ë„ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•˜ë ¤ë©´, ë§µì´ ì—…ë°ì´íŠ¸ë  ë•Œë§ˆë‹¤ /map í† í”½ì„ êµ¬ë…í•˜ì—¬ ìƒˆë¡­ê²Œ ìƒì„±ëœ ë§µì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 5.2 ì¥ì• ë¬¼ íšŒí”¼
Navigation ì‹œìŠ¤í…œì—ì„œëŠ” costmapì„ ì‚¬ìš©í•˜ì—¬ ì¥ì• ë¬¼ íšŒí”¼ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë¡œë´‡ì´ ì£¼í–‰ ì¤‘ ì¥ì• ë¬¼ì„ ê°ì§€í•˜ë©´, move_base íŒ¨í‚¤ì§€ê°€ ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê²½ë¡œë¥¼ ì¡°ì •í•˜ê³  íšŒí”¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

ROS2ì—ì„œ í† í”½ì„ ë³´ë‚´ê³  êµ¬ë…í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì„¤ëª…ë“œë¦¬ê² ìŠµë‹ˆë‹¤. íŒŒì´ì¬ì„ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•˜ë©°, ì˜ˆì‹œ ì½”ë“œë„ í¬í•¨í•  ê²ƒì…ë‹ˆë‹¤. ì£¼ë¡œ rclpy ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ROS2 ë…¸ë“œë¥¼ ì‘ì„±í•˜ê³ , í† í”½ì„ ì†¡ì‹ (publish)í•˜ê³  ìˆ˜ì‹ (subscribe)í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## 1. í† í”½ ë©”ì‹œì§€ ì†¡ì‹  (Publisher)
íŒŒì´ì¬ì—ì„œ í† í”½ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” ë°©ë²•ì€ rclpy.Publisherë¥¼ ì‚¬ìš©í•˜ì—¬ publish() ë©”ì„œë“œë¡œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì•„ë˜ëŠ” geometry_msgs/Twist ë©”ì‹œì§€ íƒ€ì…ì„ ì‚¬ìš©í•˜ì—¬ cmd_vel í† í”½ìœ¼ë¡œ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤.

### 1.1 Publisher ì˜ˆì‹œ ì½”ë“œ
```
import rclpy
from rclpy.node import Node
from geometry_msgs.msg import Twist

class MinimalPublisher(Node):
    def __init__(self):
        super().__init__('minimal_publisher')
        # Publisher ê°ì²´ ìƒì„±, 'cmd_vel' í† í”½ì— Twist ë©”ì‹œì§€ íƒ€ì…ìœ¼ë¡œ ë©”ì‹œì§€ ì „ì†¡
        self.publisher_ = self.create_publisher(Twist, 'cmd_vel', 10)
        
        # 1ì´ˆë§ˆë‹¤ ë©”ì‹œì§€ë¥¼ ë°œí–‰í•˜ëŠ” íƒ€ì´ë¨¸ ì„¤ì •
        self.timer = self.create_timer(1.0, self.timer_callback)

    def timer_callback(self):
        # Twist ë©”ì‹œì§€ ê°ì²´ ìƒì„±
        msg = Twist()
        
        # ë©”ì‹œì§€ì— ì†ë„ ê°’ ì„¤ì • (ì˜ˆ: ì„ í˜• ì†ë„)
        msg.linear.x = 0.5  # 0.5 m/së¡œ ì „ì§„
        msg.angular.z = 0.1  # 0.1 rad/së¡œ íšŒì „
        
        # ë©”ì‹œì§€ë¥¼ 'cmd_vel' í† í”½ìœ¼ë¡œ ë°œí–‰
        self.publisher_.publish(msg)
        self.get_logger().info(f"Publishing: linear.x = {msg.linear.x}, angular.z = {msg.angular.z}")

def main(args=None):
    rclpy.init(args=args)
    minimal_publisher = MinimalPublisher()
    
    # 2ì´ˆë§ˆë‹¤ ë…¸ë“œë¥¼ ì‹¤í–‰
    rclpy.spin(minimal_publisher)
    
    minimal_publisher.destroy_node()
    rclpy.shutdown()

if __name__ == '__main__':
    main()
```
ì„¤ëª…
create_publisher(): cmd_velì´ë¼ëŠ” í† í”½ì— Twist ë©”ì‹œì§€ íƒ€ì…ì„ ë°œí–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.

timer_callback(): 1ì´ˆë§ˆë‹¤ í˜¸ì¶œë˜ëŠ” ì½œë°± í•¨ìˆ˜ë¡œ, Twist ë©”ì‹œì§€ë¥¼ ë§Œë“¤ì–´ì„œ cmd_vel í† í”½ìœ¼ë¡œ ë°œí–‰í•©ë‹ˆë‹¤.

publish(): ì‹¤ì œë¡œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤.

rclpy.spin(): ROS2 ë…¸ë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” í•¨ìˆ˜ë¡œ, ê³„ì†í•´ì„œ ë©”ì‹œì§€ë¥¼ ë°œí–‰í•˜ë ¤ë©´ ë…¸ë“œë¥¼ ê³„ì† ì‹¤í–‰ì‹œì¼œì•¼ í•©ë‹ˆë‹¤.

## 2. í† í”½ ë©”ì‹œì§€ êµ¬ë… (Subscriber)
í† í”½ì„ êµ¬ë…í•˜ë ¤ë©´ rclpy.Subscriberë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. êµ¬ë…í•œ ë©”ì‹œì§€ë¥¼ ë°›ì„ ì½œë°± í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ê³ , subscribe() ë©”ì„œë“œë¡œ í•´ë‹¹ í† í”½ì„ êµ¬ë…í•©ë‹ˆë‹¤.

### 2.1 Subscriber ì˜ˆì‹œ ì½”ë“œ
```
import rclpy
from rclpy.node import Node
from geometry_msgs.msg import Twist

class MinimalSubscriber(Node):
    def __init__(self):
        super().__init__('minimal_subscriber')
        
        # 'cmd_vel' í† í”½ì„ êµ¬ë…í•˜ê³ , êµ¬ë…í•  ë©”ì‹œì§€ íƒ€ì…ì€ Twistë¡œ ì„¤ì •
        self.subscription = self.create_subscription(
            Twist,
            'cmd_vel',
            self.listener_callback,
            10
        )
        self.subscription  # prevent unused variable warning

    def listener_callback(self, msg):
        # ë°›ì€ ë©”ì‹œì§€ë¥¼ ì¶œë ¥
        self.get_logger().info(f"Received: linear.x = {msg.linear.x}, angular.z = {msg.angular.z}")

def main(args=None):
    rclpy.init(args=args)
    minimal_subscriber = MinimalSubscriber()
    
    # ë…¸ë“œë¥¼ ì‹¤í–‰í•˜ì—¬ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ë„ë¡ í•¨
    rclpy.spin(minimal_subscriber)
    
    minimal_subscriber.destroy_node()
    rclpy.shutdown()

if __name__ == '__main__':
    main()
```
ì„¤ëª…
create_subscription(): cmd_vel í† í”½ì„ êµ¬ë…í•˜ê³ , Twist ë©”ì‹œì§€ íƒ€ì…ì„ ë°›ì•„ì˜¬ ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.

listener_callback(): ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•  ë•Œ í˜¸ì¶œë˜ëŠ” ì½œë°± í•¨ìˆ˜ì…ë‹ˆë‹¤. ì—¬ê¸°ì—ì„œëŠ” ìˆ˜ì‹ ëœ ë©”ì‹œì§€ë¥¼ ë¡œê¹…í•©ë‹ˆë‹¤.

rclpy.spin(): ROS2 ë…¸ë“œë¥¼ ì‹¤í–‰ì‹œì¼œì„œ ê³„ì†í•´ì„œ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•©ë‹ˆë‹¤.

## 3. í† í”½ ì†¡ìˆ˜ì‹  ì‹¤ìŠµ ì˜ˆì‹œ
Publisher ì‹¤í–‰: ìœ„ì˜ MinimalPublisher ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´, ë¡œë´‡ì˜ ì†ë„ ì •ë³´ë¥¼ 1ì´ˆë§ˆë‹¤ cmd_vel í† í”½ì— ì „ì†¡í•©ë‹ˆë‹¤.

Subscriber ì‹¤í–‰: MinimalSubscriber ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´, cmd_vel í† í”½ì„ êµ¬ë…í•˜ê³ , ë¡œë´‡ì˜ ì†ë„ ì •ë³´ê°€ ìˆ˜ì‹ ë  ë•Œë§ˆë‹¤ í•´ë‹¹ ì†ë„ ê°’ì„ ì¶œë ¥í•©ë‹ˆë‹¤.

## 4. ì¤‘ìš”í•œ ì‚¬í•­
ì½œë°± í•¨ìˆ˜: êµ¬ë…ìëŠ” ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•  ë•Œë§ˆë‹¤ listener_callbackê³¼ ê°™ì€ ì½œë°± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ ë‚´ì—ì„œ ë©”ì‹œì§€ ì²˜ë¦¬ ë¡œì§ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

QoS (Quality of Service): ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ê±°ë‚˜ êµ¬ë…í•  ë•Œ QoS ì„¤ì •ì„ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì— ë”°ë¼ ë©”ì‹œì§€ì˜ ì‹ ë¢°ì„± ë° ì „ì†¡ ì£¼ê¸°ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, 10ì€ ë©”ì‹œì§€ íì˜ ê¸¸ì´ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.

```
from rclpy.qos import QoSProfile, QoSHistoryPolicy

qos_profile = QoSProfile(depth=10, history=QoSHistoryPolicy.KEEP_LAST)
```
ì´ëŸ¬í•œ ì„¤ì •ì€ ì£¼ë¡œ ì‹¤ì‹œê°„ ì œì–´ ì‹œìŠ¤í…œì—ì„œ ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.

## ê²°ë¡ 
ROS2ì—ì„œ í† í”½ì„ ì‚¬ìš©í•˜ì—¬ ë©”ì‹œì§€ë¥¼ ì†¡ì‹ í•˜ê³  êµ¬ë…í•˜ëŠ” ë°©ì‹ì€ ë§¤ìš° ì§ê´€ì ì…ë‹ˆë‹¤. rclpy.Publisherì™€ rclpy.Subscriberë¥¼ ì‚¬ìš©í•˜ë©´ ê°„ë‹¨í•˜ê²Œ í† í”½ì„ í†µí•´ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê³  ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„ì˜ ì˜ˆì‹œ ì½”ë“œë¥¼ ë°”íƒ•ìœ¼ë¡œ í† í”½ì„ ì‚¬ìš©í•œ ì‹¤ì‹œê°„ ë°ì´í„° ì†¡ìˆ˜ì‹ ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


## ğŸ”§ ì „ì²´ í•˜ë“œì›¨ì–´ ì—°ê²° êµ¬ì¡° ìš”ì•½

```
[LiDAR]   â†’  
            \
             â†’ [Raspberry Pi (ROS 2 ë…¸ë“œ ì‹¤í–‰)]
            /
[IMU]     â†’
```
[Raspberry Pi] â†” [Motor Driver] â†” [ëª¨í„° (íœ )]

## ğŸ’¡ ê° ì¥ì¹˜ë³„ ì—°ê²° ë° ë°ì´í„° íë¦„
### 1. LiDAR

- ì—°ê²° ë°©ì‹: USB ë˜ëŠ” UART (ë³´í†µ /dev/ttyUSB0, /dev/ttyAMA0 ë“±)
- ì—­í• : ì£¼ë³€ í™˜ê²½ì„ 2D í˜¹ì€ 3Dë¡œ ìŠ¤ìº” â†’ /scan í† í”½ìœ¼ë¡œ í¼ë¸”ë¦¬ì‹œ
- ROS2 ë…¸ë“œ: LiDAR ë“œë¼ì´ë²„ ë…¸ë“œ ì‹¤í–‰ (ì˜ˆ: RPLIDAR â†’ rplidar_ros2)

```
/dev/ttyUSB0 â†’ LiDAR ë“œë¼ì´ë²„ ë…¸ë“œ â†’ /scan (LaserScan ë©”ì‹œì§€)
```

### 2. IMU (ê´€ì„±ì¸¡ì •ì¥ì¹˜)
- ì—°ê²° ë°©ì‹: USB, I2C, SPI (ë³´í†µ /dev/ttyUSB1 ë“±ìœ¼ë¡œ ì¸ì‹)
- ì—­í• : ê°€ì†ë„, ìì´ë¡œ, ìì„¸ ì •ë³´ ì œê³µ â†’ /imu í† í”½ìœ¼ë¡œ í¼ë¸”ë¦¬ì‹œ
- ROS2 ë…¸ë“œ: IMU ë“œë¼ì´ë²„ ë…¸ë“œ (ì˜ˆ: microstrain_inertial_driver, bno055_ros2 ë“±)

```
/dev/ttyUSB1 â†’ IMU ë“œë¼ì´ë²„ ë…¸ë“œ â†’ /imu (Imu ë©”ì‹œì§€)
```

### 3. ëª¨í„° ë“œë¼ì´ë²„
- ì—°ê²° ë°©ì‹: USB, UART, CAN, PWM ë“± (ë³´í†µ /dev/ttyUSB2 ë˜ëŠ” GPIO)
- ì…ë ¥: ROS2ì—ì„œ ê³„ì‚°ëœ ì†ë„ ëª…ë ¹ (/cmd_vel)
- ì¶œë ¥: ì—”ì½”ë” ê°’ì„ í†µí•´ ì‹¤ì œ ì†ë„ì™€ ìœ„ì¹˜ í”¼ë“œë°± (/wheel_odom, /encoder)
- ROS2 ë…¸ë“œ: ëª¨í„° ë“œë¼ì´ë²„ ì œì–´ ë…¸ë“œ
```
/cmd_vel (Twist ë©”ì‹œì§€) â†’ ëª¨í„° ë“œë¼ì´ë²„ â†’ ëª¨í„° ì œì–´
ëª¨í„° ë“œë¼ì´ë²„ â†’ /encoder or /wheel_odom (Odometry ë©”ì‹œì§€)
```

## ğŸ§  ì „ì²´ íë¦„ ì˜ˆì‹œ (ROS2 ê´€ì ì—ì„œ)
- LiDAR â†’ /scan : ì§€ë„ ìƒì„± ë° ì¥ì• ë¬¼ ì¸ì‹ìš©
- IMU + ì—”ì½”ë” â†’ /odom ê³„ì‚° : ë¡œë´‡ì˜ ìœ„ì¹˜ ì¶”ì •
- SLAM/Navigation â†’ /cmd_vel ëª…ë ¹ ìƒì„±
- ëª¨í„° ë“œë¼ì´ë²„ê°€ /cmd_vel ìˆ˜ì‹  â†’ ëª¨í„° íšŒì „
- í”¼ë“œë°± (IMU, ì—”ì½”ë”) â†’ odom ê°±ì‹  â†’ RViz ì‹œê°í™”

## ğŸ’» ë¼ì¦ˆë² ë¦¬íŒŒì´ ì„¤ì • ì˜ˆì‹œ
- ë¼ì¦ˆë² ë¦¬íŒŒì´ì— ROS 2 Humble ì„¤ì¹˜
- ê° ì„¼ì„œì˜ ë“œë¼ì´ë²„ ë…¸ë“œ ì‹¤í–‰
- udev ì„¤ì •ìœ¼ë¡œ í¬íŠ¸ ì´ë¦„ ê³ ì • (/dev/lidar, /dev/imu, /dev/motor)

> launch.pyë¡œ ì „ì²´ ì‹œìŠ¤í…œ í†µí•© ì‹¤í–‰

## ğŸ”Œ ì‹¤ì œ ë¬¼ë¦¬ ì—°ê²° ì˜ˆ
|ì¥ì¹˜|ì—°ê²° ë°©ì‹|ë¼ì¦ˆë² ë¦¬íŒŒì´ í¬íŠ¸|
|------|------|------|
|LiDAR|USB|/dev/ttyUSB0|
|IMU|USB / I2C||/dev/ttyUSB1 ë˜ëŠ” GPIO I2C|
|ëª¨í„° ë“œë¼ì´ë²„|USB / UART / GPIO|/dev/ttyUSB2 ë˜ëŠ” GPIO|

